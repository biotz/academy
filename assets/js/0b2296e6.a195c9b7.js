"use strict";(self.webpackChunkacademy=self.webpackChunkacademy||[]).push([[9789],{6809:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>l,frontMatter:()=>n,metadata:()=>r,toc:()=>h});var a=o(4848),i=o(8453);const n={sidebar_position:6,sidebar_label:"How to Create and Use a Webhook"},s="How to Create and Use Webhooks",r={id:"How-to guides/How to create and use webhooks",title:"How to Create and Use Webhooks",description:"Introduction",source:"@site/docs/How-to guides/How to create and use webhooks.md",sourceDirName:"How-to guides",slug:"/How-to guides/How to create and use webhooks",permalink:"/docs/How-to guides/How to create and use webhooks",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,sidebar_label:"How to Create and Use a Webhook"},sidebar:"tutorialSidebar",previous:{title:"How to create a dashboard",permalink:"/docs/How-to guides/How to create a dashboard"},next:{title:"How to use dashboard variables",permalink:"/docs/How-to guides/How to use dashboard variables"}},d={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Creating a Webhook",id:"creating-a-webhook",level:2},{value:"Registering a Device Alarm with the Webhook",id:"registering-a-device-alarm-with-the-webhook",level:2},{value:"Receiving Webhook Event Data",id:"receiving-webhook-event-data",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"how-to-create-and-use-webhooks",children:"How to Create and Use Webhooks"}),"\n",(0,a.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsxs)(t.p,{children:["Biotz provides webhook subscriptions for its alarms. In short, a ",(0,a.jsx)("a",{href:"https://en.wikipedia.org/wiki/Webhook",children:"webhook"})," is a method used by one application (e.g., Biotz) to send real-time data to another application (e.g., customers) when a specific event occurs."]}),"\n",(0,a.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsx)(t.p,{children:"There are no prerequisites for creating a webhook. However, webhooks are used for device events, so to use them, you need a device type that includes at least one message type and schema. It's also recommended to have a device that has already transmitted some data."}),"\n",(0,a.jsx)(t.h2,{id:"creating-a-webhook",children:"Creating a Webhook"}),"\n",(0,a.jsx)(t.p,{children:'Webhooks are created from the "Developer Tools" section in the sidebar. To create a webhook, provide a name and the mandatory "callback URL" (i.e., the URL to which the event data will be pushed). Webhooks only support HTTPS URLs.'}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Developer Tools -&gt; Webhooks",src:o(9225).A+"",width:"1659",height:"464"})})}),"\n",(0,a.jsx)(t.p,{children:'Clicking "New Webhook" takes you to a form where you can enter the name and URL for your webhook.'}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"New Webhook",src:o(9468).A+"",width:"785",height:"579"})})}),"\n",(0,a.jsx)(t.p,{children:'Upon clicking "Save," the webhook is created, and a "secret" is automatically generated. It is advised to regenerate the secret regularly.'}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Webhook Created!",src:o(1758).A+"",width:"1894",height:"566"})})}),"\n",(0,a.jsx)(t.p,{children:"Now the webhook is ready for use. Don't forget to take note of the webhook's name and secret for later use!"}),"\n",(0,a.jsx)(t.h2,{id:"registering-a-device-alarm-with-the-webhook",children:"Registering a Device Alarm with the Webhook"}),"\n",(0,a.jsx)(t.p,{children:'For a webhook to be useful, it must be subscribed to a Biotz event. Currently, only alarm notification events support webhook integration. To add one, navigate to "Alarm Triggers" under the "Setup" section in the sidebar and choose a device type (e.g., Device Type 1).'}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Select Device Type from Alarm Triggers",src:o(2692).A+"",width:"1870",height:"333"})})}),"\n",(0,a.jsx)(t.p,{children:'Then either create or edit an alarm trigger and click "Edit Webhook List."'}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Edit Webhook List",src:o(991).A+"",width:"1861",height:"499"})})}),"\n",(0,a.jsx)(t.p,{children:"Search for your webhook by name, add it from the dropdown, and then save. Now you can proceed to actually use the webhook from your app."}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Search and Add Webhook",src:o(1014).A+"",width:"1862",height:"566"})})}),"\n",(0,a.jsx)(t.h2,{id:"receiving-webhook-event-data",children:"Receiving Webhook Event Data"}),"\n",(0,a.jsx)(t.p,{children:"If all the above steps were followed and there is at least one device that generates alarms, then alarm data will be sent to the webhook URI via POST."}),"\n",(0,a.jsx)(t.p,{children:'From the client side, there should be validation of the webhook via the "Biotz-IoT-Signature" header entry. The Biotz-IoT-Signature has the following structure:'}),"\n",(0,a.jsx)(t.p,{children:"Biotz-IoT-Signature: t=1492774577,v1=d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5,"}),"\n",(0,a.jsxs)(t.p,{children:["Where the string following ",(0,a.jsx)(t.code,{children:"v1="})," is the signed payload of the event and is created by first concatenating:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"The string timestamp"}),"\n",(0,a.jsxs)(t.li,{children:["The character ",(0,a.jsx)(t.code,{children:"."})]}),"\n",(0,a.jsx)(t.li,{children:"The actual alarm payload in JSON (the body of the POST request)"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"And then generating an SHA256 hash of the concatenation using the webhook secret key."})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},2692:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/alarm_trigger_webhook_1-b67954b04a939fd732848c4b8458ead5.png"},991:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/alarm_trigger_webhook_2-de743ec10648875eec16b1e8d004a032.png"},1014:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/alarm_trigger_webhook_3-5ede71e93eaf49e884875fe914b1c255.png"},9225:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/developer_tools_webhooks-97beeab609345bab94ed9e8a701c2900.png"},9468:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/new_webhook-bf5a48f9e423ad7f59daf21756a3a0e9.png"},1758:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/webhook_created-475b35f149b44f78d258bc6cfeb0c72d.png"},8453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>r});var a=o(6540);const i={},n=a.createContext(i);function s(e){const t=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(n.Provider,{value:t},e.children)}}}]);