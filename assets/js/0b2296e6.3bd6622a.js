"use strict";(self.webpackChunkacademy=self.webpackChunkacademy||[]).push([[9789],{6809:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>l,frontMatter:()=>n,metadata:()=>r,toc:()=>c});var a=o(4848),i=o(8453);const n={sidebar_position:6,sidebar_label:"How to create and use a webhook"},s="How to create and use webhooks",r={id:"How-to guides/How to create and use webhooks",title:"How to create and use webhooks",description:"Introduction",source:"@site/docs/How-to guides/How to create and use webhooks.md",sourceDirName:"How-to guides",slug:"/How-to guides/How to create and use webhooks",permalink:"/docs/How-to guides/How to create and use webhooks",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,sidebar_label:"How to create and use a webhook"},sidebar:"tutorialSidebar",previous:{title:"How to create a dashboard",permalink:"/docs/How-to guides/How to create a dashboard"},next:{title:"How to use dashboard variables",permalink:"/docs/How-to guides/How to use dashboard variables"}},d={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Creating a webhook",id:"creating-a-webhook",level:2},{value:"Registering a device alarm with the webhook",id:"registering-a-device-alarm-with-the-webhook",level:2},{value:"Receive webhook event data",id:"receive-webhook-event-data",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"how-to-create-and-use-webhooks",children:"How to create and use webhooks"}),"\n",(0,a.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsxs)(t.p,{children:["Biotz provides webhook subscriptions for it's alarms. In short a  ",(0,a.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Webhook",children:"webhook"})," is a method used by one application (e.g. Biotz) to send real-time data to another application (e.g. customers) when a specific event occurs."]}),"\n",(0,a.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsx)(t.p,{children:"There is no Prerequisite to creating a webhook. However webhooks are used against device events, so to use them, you need a device type that includes at least one message type and schema. It's also recommended to have a device that has already transmitted some data."}),"\n",(0,a.jsx)(t.h2,{id:"creating-a-webhook",children:"Creating a webhook"}),"\n",(0,a.jsx)(t.p,{children:'Webhooks are created from the \u201cDeveloper tools\u201d section in the sidebar. To create a webhook provide a name, and the mandatory  "callback url" e.g. the URL that the event data is going to be pushed against. Webhooks only support https URLs'}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Developer tools -&gt; webhooks",src:o(9225).A+"",width:"1659",height:"464"})})}),"\n",(0,a.jsx)(t.p,{children:"Clicking \u201cnew webhook\u201d gets you to a form, to enter the name and url for your webhook"}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"New webhook",src:o(9468).A+"",width:"785",height:"579"})})}),"\n",(0,a.jsx)(t.p,{children:'On clicking "Save" the webhook is created, and a secret" is automatically generated. It is advised to regenerate the secrete regularly'}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Webhook created!",src:o(1758).A+"",width:"1894",height:"566"})})}),"\n",(0,a.jsx)(t.p,{children:"Now the webhook is ready for use. Don't forget to take a note of the webhook's name and secret for later use !"}),"\n",(0,a.jsx)(t.h2,{id:"registering-a-device-alarm-with-the-webhook",children:"Registering a device alarm with the webhook"}),"\n",(0,a.jsx)(t.p,{children:'A webhook to be useful must be subscribed to a Biotz event. For now only alarm notifications events support webhook integration.\nTo add one under the sidebar section Setup  navigate to "Alarm Triggers" and choose a device type e.g. device type 1'}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Select device type from alarm triggers",src:o(2692).A+"",width:"1870",height:"333"})})}),"\n",(0,a.jsx)(t.p,{children:'Then either create or edit an alarm trigger and click under"Edit webhook list"'}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Edit wehook list",src:o(991).A+"",width:"1861",height:"499"})})}),"\n",(0,a.jsx)(t.p,{children:"Search your webhook by name and add it from the tropdown and then save. Now you can proceed to actually use the webhook from your app"}),"\n",(0,a.jsx)("div",{class:"tutorial-image-container",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Search and add webhook",src:o(1014).A+"",width:"1862",height:"566"})})}),"\n",(0,a.jsx)(t.h2,{id:"receive-webhook-event-data",children:"Receive webhook event data"}),"\n",(0,a.jsx)(t.p,{children:"If all the above steps were followed and there is at least one device that\ngenerates alarms then alarm data will be send to the webhook uri via post."}),"\n",(0,a.jsx)(t.p,{children:'From the client side there should validation of the webhook via Biotz-IoT-Signature"   header entry. Biotz-IoT-Signature has the following structure:'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"Biotz-IoT-Signature:t=1492774577,v1=d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5,\n\n"})}),"\n",(0,a.jsx)(t.p,{children:"Where the string following v1= is  the signed payload of the event and is created by first concatenating:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"The string timestamp"}),"\n",(0,a.jsx)(t.li,{children:"The character ."}),"\n",(0,a.jsx)(t.li,{children:"The actual alarm payload in json, the body of the post request"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"And then generating an SHA256 of the concatenation using the webhook secret key"})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},2692:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/alarm_trigger_webhook_1-b67954b04a939fd732848c4b8458ead5.png"},991:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/alarm_trigger_webhook_2-de743ec10648875eec16b1e8d004a032.png"},1014:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/alarm_trigger_webhook_3-5ede71e93eaf49e884875fe914b1c255.png"},9225:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/developer_tools_webhooks-97beeab609345bab94ed9e8a701c2900.png"},9468:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/new_webhook-bf5a48f9e423ad7f59daf21756a3a0e9.png"},1758:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/webhook_created-475b35f149b44f78d258bc6cfeb0c72d.png"},8453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>r});var a=o(6540);const i={},n=a.createContext(i);function s(e){const t=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(n.Provider,{value:t},e.children)}}}]);